<Window x:Class="HitsDownloadManager.WPFApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Hits Download Manager" Height="700" Width="1300"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource WindowBackgroundBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource CardBackgroundBrush}" 
                Padding="20,15" BorderBrush="{DynamicResource AccentBrush}" BorderThickness="0,0,0,3">
            <Grid>
                <TextBlock Text="Hits Download Manager" Style="{StaticResource AppTitle}"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="🌙 Theme" Click="ToggleTheme_Click"
                            Style="{StaticResource SecondaryButton}" 
                            Padding="12,6" FontSize="12" Margin="0,0,10,0"/>
                    <TextBlock Text="Modern Download Manager" 
                               Style="{StaticResource LabelSmall}" 
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
        <!-- Add Download Section -->
        <Border Grid.Row="1" Background="{DynamicResource CardBackgroundBrush}" 
                Margin="15,15,15,5" Padding="20" CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0" Background="{DynamicResource WindowBackgroundBrush}" 
                        BorderBrush="{DynamicResource SubtleBorderBrush}"
                        BorderThickness="1"
                        CornerRadius="6" Padding="12,8" Margin="0,0,10,0">
                    <TextBox Text="{Binding NewDownloadUrl, UpdateSourceTrigger=PropertyChanged}"
                             Background="Transparent" BorderThickness="0"
                             Foreground="{DynamicResource PrimaryTextBrush}"
                             FontSize="14" VerticalContentAlignment="Center"/>
                </Border>
                <Button Grid.Column="1" Content="Add Download" 
                        Style="{StaticResource PrimaryButton}"
                        Command="{Binding AddDownloadCommand}" 
                        Width="150" Margin="0,0,10,0"/>
                <Button Grid.Column="2" Content="Browse..." 
                        Style="{StaticResource SecondaryButton}"
                        Command="{Binding BrowseDirectoryCommand}" 
                        Width="120"/>
            </Grid>
        </Border>
        <!-- Downloads DataGrid -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackgroundBrush}" 
                Margin="15,5,15,5" CornerRadius="8" Padding="10">
            <DataGrid ItemsSource="{Binding Downloads}" 
                      SelectedItem="{Binding SelectedDownload}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      CanUserAddRows="False"
                      Background="Transparent"
                      Foreground="{DynamicResource PrimaryTextBrush}"
                      BorderThickness="0"
                      GridLinesVisibility="Horizontal"
                      RowBackground="Transparent"
                      AlternatingRowBackground="{DynamicResource WindowBackgroundBrush}"
                      ColumnHeaderStyle="{StaticResource ModernDataGridHeader}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Filename" Binding="{Binding Filename}" Width="*" MinWidth="150"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding FileExtension}" Width="70"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                    <DataGridTextColumn Header="Progress" Binding="{Binding Progress, StringFormat={}{0:F1}%}" Width="80"/>
                    <DataGridTextColumn Header="Speed" Binding="{Binding Speed}" Width="100"/>
                    <DataGridTextColumn Header="Size" Binding="{Binding TotalSizeFormatted}" Width="100"/>
                    <DataGridTextColumn Header="Downloaded" Binding="{Binding DownloadedSizeFormatted}" Width="110"/>
                    <DataGridTextColumn Header="Time Left" Binding="{Binding TimeRemaining}" Width="100"/>
                    <DataGridTextColumn Header="Retries" Binding="{Binding RetryCount}" Width="70"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
        <!-- Control Buttons -->
        <Border Grid.Row="3" Background="{DynamicResource CardBackgroundBrush}" 
                Margin="15,5,15,5" Padding="20" CornerRadius="8">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="⏸ Pause" Style="{StaticResource PrimaryButton}" 
                        Command="{Binding PauseDownloadCommand}" Width="120" Margin="5"/>
                <Button Content="▶ Resume" Style="{StaticResource PrimaryButton}" 
                        Command="{Binding ResumeDownloadCommand}" Width="120" Margin="5"/>
                <Button Content="✖ Cancel" Style="{StaticResource SecondaryButton}" 
                        Command="{Binding CancelDownloadCommand}" Width="120" Margin="5"/>
                <Button Content="🗑 Remove" Style="{StaticResource SecondaryButton}" 
                        Command="{Binding RemoveDownloadCommand}" Width="120" Margin="5"/>
                <Button Content="Clear All" Style="{StaticResource SecondaryButton}" 
                        Command="{Binding ClearCompletedCommand}" Width="120" Margin="5"/>
            </StackPanel>
        </Border>
        <!-- Status Bar -->
        <Border Grid.Row="4" Background="{DynamicResource AccentBrush}" Padding="15,10">
            <Grid>
                <TextBlock Text="{Binding DownloadDirectory}" 
                           Foreground="White" FontSize="11" Opacity="0.9"/>
                <TextBlock Text="Ready" Foreground="White" FontSize="11" 
                           HorizontalAlignment="Right"/>
            </Grid>
        </Border>
    </Grid>
</Window>
